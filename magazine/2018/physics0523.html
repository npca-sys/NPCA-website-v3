<!DOCTYPE html>
<html lang="ja">
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-4970457-1"></script>
  <script>
    if (document.domain === 'www.npca.jp') {
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-4970457-1');
    }
  </script>

  <meta charset="UTF-8" />
  <link rel="stylesheet" type="text/css" href="style.css" />
<link rel="next" title="編集後記" href="postdef.html"><link rel="prev" title="深層学習の基礎のキソ" href="niimi.html">  <meta name="generator" content="Re:VIEW" />
  <title>JOI参戦記 | NPCA部誌2018</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.9.0/dist/katex.min.css" integrity="sha384-TEMocfGvRuD1rIAacqrknm5BQZ7W7uWitoih+jMNFXQIbNl16bO8OZmylH/Vi/Ei" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/katex@0.9.0/dist/katex.min.js" integrity="sha384-jmxIlussZWB7qCuB+PgKG1uLjjxbVVIayPJwi6cG6Zb4YKq0JIw+OMnkkEC7kYCq" crossorigin="anonymous"></script>
</head>
<body>
  <div class="book">
    <nav class="side-content">
      <h1>NPCA部誌2018</h1>
      <ul class="book-toc">
<li><a href="index.html">TOP</a></li>
<li><a href="predef.html">部長挨拶</a></li>
<li><a href="object_1037.html">1 ARKit</a></li>
<li><a href="2lu3.html">2 写真のデータを読み込もう</a></li>
<li><a href="hinata.html">3 すばやい文字列の探しかた</a></li>
<li><a href="harady.html">4 簡単!VR3(00)分クッキング</a></li>
<li><a href="taizo0122.html">5 ぱそこんであそぼ</a></li>
<li><a href="takepan.html">6 マインクラフトのサーバー管理を楽で便利なものにしてみる話</a></li>
<li><a href="kota1024.html">7 簡単blenderモデリング</a></li>
<li><a href="niimi.html">8 深層学習の基礎のキソ</a></li>
<li><a href="physics0523.html">9 JOI参戦記</a></li>
<li><a href="postdef.html">編集後記</a></li>
</ul>
      <p class="review-signature">powered by <a href="http://reviewml.org/">Re:VIEW</a></p>
    </nav>
    <div class="book-body">
      <header>
      </header>
      <div class="book-page">
        <h1><a id="h9"></a><span class="secno">第9章　</span>JOI参戦記</h1>
<p><p style="text-align:right">73回生 physics</p></p>

<h2><a id="h9-1"></a><span class="secno">9.1　</span>予選のお話</h2>
<p>去年12月10日にオンライン予選(インターネット上で行われる)があって、本選に行くにもまずそれを勝ち抜けないとなりません。僕は今年は部室で受験していました。予選を通過するためには、100点満点の問題を3完(3問の完答)+部分点がセオリーです。問1~3をいかに早く解いて部分点に回れるかが勝負となります。予選で僕がどんな感じで戦ったか問題も交えながら書いていきます。</p>

<h3><a id="h9-1-1"></a>前半戦、問1~3</h3>

<h4><a id="h9-1-1-1"></a>問1</h4>
<p>JOI君は鉛筆を<span class="equation">N</span>本買うために近くの文房具店に行くことにした．文房具店では鉛筆が一定の本数ずつのセットで売られている．セット X は<span class="equation">A</span>本で<span class="equation">B</span> 円，セット Y は<span class="equation">C</span>本で<span class="equation">D</span>円である．JOI君はセットXかセットYの一方を選び，選んだセットをいくつか購入する．両方のセットを購入することはできない．<span class="equation">N</span>本以上の鉛筆を得るために必要な金額の最小値を求めよ．</p>

<h4><a id="h9-1-1-2"></a>問1の解き方</h4>
<p><span class="equation">X</span>を<span class="equation">N</span>/<span class="equation">A</span>(小数点以下切り上げ)セット買う場合と、<span class="equation">Y</span>を<span class="equation">N</span>/<span class="equation">B</span>(小数点以下切り上げ)セット買う場合の比較です、本番では直ぐに正解のプログラムを書くことが出来ました。</p>

<h4><a id="h9-1-1-3"></a>問2</h4>
<p>JOI君はおじさんの家で双六を見つけた．双六は直線状に並んだ<span class="equation">N+2</span>個のマスからなり，1番目のマスはスタート，<span class="equation">N+2</span>番目のマスはゴールである．その他の各マスには0または1が書かれていて，各<span class="equation">i</span> (<span class="equation">1 \leq i \leq N</span>) について，<span class="equation">i+1</span> 番目のマスに書かれた数字は<span class="equation">A_i</span>である．</p>
<p>双六では，最初にスタートのマスにコマを置き，サイコロを振って，出た目の数だけコマを進めることを繰り返す．ただし，1の書かれたマスに止まった場合は，ゲームオーバーである．ゲームオーバーにならずにゴールのマスに止まるか，ゴールのマスを通り過ぎたら，ゲームクリアである．</p>
<p>JOI君は双六を遊ぶためのサイコロをおもちゃ屋さんに買いに行くことにした．おもちゃ屋さんには<span class="equation">N+1</span>個のサイコロが売っている．<span class="equation">j</span>番目 (<span class="equation">1 \leq j \leq N+1</span>) のサイコロは<span class="equation">j</span>個の面を持ち，1,2,...,<span class="equation">j</span>が1つずつ書かれている．</p>
<p>JOI君はゲームクリアできるようなサイコロのうち，最も面の数が少ないサイコロを1個買うことにした．JOI君はどのサイコロを買えばよいだろうか．</p>

<h4><a id="h9-1-1-4"></a>問2の解き方</h4>
<p>これはサンプルの入出力を見ると考察しやすくて、例えば</p>
<div class="emlist-code">
<p class="caption">入力例3</p>
<pre class="emlist highlight">7
0 0 1 0 1 1 0
</pre>
</div>
<div class="emlist-code">
<p class="caption">出力例3</p>
<pre class="emlist highlight">3
</pre>
</div>
<p>1が付いたマスは飛ばさなければなりません。例えば&quot;0 1 0&quot;なら最初の0からその次の0まで移動するのに2以上の目が必要です。&quot;0 1 1 1 1 1 0&quot;なら最初の0からその次の0まで移動するのに6以上の目が必要です。ここで気づくと思いますが、実は「連続する1の数」+1以上の目が必要になります。つまり、連続する1の数の最大に1を加えて出力すれば正解となります。これは先ほど示した入力例でも成り立つことが確認できます。</p>
<p>続く問3のシミュレーションもすぐに解けて、後半3問に充分時間を残せました。</p>

<h3><a id="h9-1-2"></a>後半戦、問4~6</h3>
<p>ここで大事なのは、「可能な限り部分点を取りに行く」事です。まず、問題を一通り見て、解けそうなものを解きます。ひとまず問5が一番自分に向いてるなと思ってそれから取りかかりました。</p>

<h4><a id="h9-1-2-1"></a>問5</h4>
<p>JOI王国には広大な森林がある．森林は長方形の形をしており，南北に<span class="equation">H</span>マス，東西に<span class="equation">W</span>マスのマス目状に分けられている．北から<span class="equation">i</span>マス目，西から<span class="equation">j</span>マス目(<span class="equation">1 \leq i \leq H, 1 \leq j \leq W</span>)の領域には<span class="equation">A_{i,j}</span>本の木が生えている．ただし，北西の端の領域には木材加工工場があり，木が生えていない．すなわち，<span class="equation">A_{1,1}=0</span> である．</p>
<p>木が生えていない領域には人が立ち入ることが出来る．また人は東西南北に隣接する領域に，その領域に木が生えていなければ，移動することができる．森林の外に出ることはできない．JOI君はJOI王国の公共事業として，木を伐採し，北西の端の領域と南東の端の領域を，相互に行き来可能にしたい．</p>
<p>木の伐採は以下のようにして行う．はじめ，JOI君は木材加工工場のある北西の端の領域にいる．JOI君は，現在いる領域と東西南北に隣接する木の生えていない領域に1分で移動することができる．また，東西南北に隣接する木の生えている領域から，1分で木を1本伐採することができる．ただし，木を1本伐採したら，そのたびに北西の端の領域にある木材加工工場まで伐採した木を運ばなければならない．木を運んでいる間も，JOI君の移動速度は変わらない．木を運んでいる間は，他の木を伐採することはできない．</p>
<p>条件を満たすように木を伐採するのにかかる時間の最小値を求めよ．ただし，伐採にかかる時間とは，最後に伐採した木を，木材加工工場に運ぶまでの時間とする．</p>

<h4><a id="h9-1-2-2"></a>問5の考察</h4>
<p>この問題で注目するべきは、「時間の最小値」です。これを見ると「最短経路問題」を連想したいところ、その問題についての有効なひとつの解法としてダイクストラ法があります、奇遇にも去年の2lu3氏の部誌がそのダイクストラ法についてなので、一度目を通すと面白いと思います。まず、直ぐに思いつきそうな解法として各地点の最短到達時間でダイクストラするというのがありますが、これは木を切るというフェーズをほぼ無視しています。(ので誤り)</p>
<p>その解法で書いたソースを試しに提出したところ、28点(小課題2)のみが入りました(だいたい予想は出来ていましたが)</p>
<p>そこで、4問目が取れれば相当大きいのでどうすれば満点を得られるか少し考察したところ、どうやら「切る木の本数の最小」か「その点への時間の最小」のどちらかが更新されればダイクストラを続行すると言う風にすれば良さそうというような結論に至りました。そして実装したところ、100点を得ることに成功しました。</p>
<p>その後、問4と問6の愚直なシミュレーションをして更に16点を確保しました。</p>

<h3><a id="h9-1-3"></a>結果発表、本選へ!</h3>
<p>後日、本選ボーダーが334点と発表されました(なんでや!阪神関係ないやろ!)。僕は416点だったので比較的余裕を持って通過できました。</p>

<h2><a id="h9-2"></a><span class="secno">9.2　</span>本選のお話</h2>
<p>お待たせしました、ようやく本選の話です!</p>
<p>本選は、今年2月10~11日に筑波で行われました。交通費は大会側持ちなのでタダで筑波に行けちゃうわけですよ!(こぼれ話ですが、大阪駅から筑波に行くためには秋葉原を経由してJRからつくばエクスプレスに乗り換えることになるので、人の金でアキバにも行けます)</p>
<p>ところで二日間大会があるってどういうことって思われそうですが、何とJOIは宿泊付きです!この話は後でしますが、そのお宿とは…?乞うご期待です()</p>

<h3><a id="h9-2-1"></a>アキバで遊んだお話</h3>
<p>1日目の朝早くから電車乗って気が付いたらアキバにいました。アキバの雰囲気を味わっていました(ちなみに中の人は音ゲーマーだったりするのでゲーセンに行くなどした(ﾎﾞｿｯ))。ヨドバシカメラも梅田より巨大でビビりました。全体的には三宮と日本橋(大阪)を足して2で割ったような印象でした。</p>
<p>お昼に、ほかのJOIerと合流することになり、昼を一緒に食べるなどしました(JOIer同士でインターネットで界隈が成立していたりする)。(ここである程度互いを認知しないとコミュ障が発動することになる。)</p>

<h3><a id="h9-2-2"></a>いざ筑波へ!</h3>
<p>昼ご飯を食べ終わったら、つくばエクスプレスに乗って筑波に向かいます。だいたい45分といったところ。</p>
<p>筑波に着くと、そこは思ったより田舎でした。そこから本戦の会場に向かいます。</p>

<h3><a id="h9-2-3"></a>プラクティス&amp;コミュニケーション</h3>
<p>その後、プラクティスが始まりました。</p>
<p>本選の競技形式を練習するものですが、結構ゆるゆるで、この間に参加者とコミュニケーションも取れたりします(本番では駄目ですよ?)。僕はささっと(とも行きませんでしたが^^;)終わらせて、ほかの参加者とコミュニケーションを試みていました。しかし、灘校生特有(?)のコミュ障が発動してしまい、なかなか思う通りにはいきませんね。世知辛いのじゃ〜</p>
<p>ただ、もともと界隈に混じれていた、ほかのイベントで数人面識があったのもあって、顔とハンネが一致していくのは感動の体験です。なんとかちょっとは溶け込めて、そのまま夕食会に。(僕にしてはコミュニケーション頑張った?)</p>

<h3><a id="h9-2-4"></a>講演&amp;夕食会</h3>
<p>次に始まったのは講演。ありがたいお話を聞くことになるのですが移動疲れでダウン。ごめんなさい…()</p>
<p>講演が終わると夕食会が始まります。立食形式で、旨い飯が供給されます。ここで始まるのが</p>
<p>自　己　紹　介</p>
<p>コ　ミ　ュ　障　キ　ラ　ー</p>
<p>初対面の人に自己紹介をするのがコミュ障にとって如何に難しいことか?そりゃ僕も青ざめましたよ、でもせっかくの機会、ここで自分を売り込まないでどうする?って必死こいて自分を売り込みました。</p>
<p>実はJOIerの間で名刺を配る文化があり、僕もこの日のために名刺を用意してそれも可能な限りばら撒きました。ちょっとは爪痕残せたかな?</p>
<p>飯はかなり美味しかったです。感動のクオリティ。(言ってしまうと、学校行事の<span class="equation">10^9+7</span>倍くらい美味しい)</p>

<h3><a id="h9-2-5"></a>宿泊</h3>
<p>いよいよお宿の時間です。</p>
<p>宿についた時、それはもうワクワクでいっぱいでした。ちなみに、到着後すぐに、AtCoderでコンテストが始まったので一部の方はそれに出るなどしていました。JOIの大会を知ったのが中2の春とかだったので宿泊は実に1年半以上越しの念願です。宿はどんな感じかなーという評判も界隈や先輩から流れてきていたりします。その多くが「独房」との大変誉高い評価だったので、僕も楽しみにしていました。</p>
<p>ホンマかいや、と思いつつ鍵を受け取り部屋に向かいます。部屋の鍵を開けてみました。すると、そこに飛び込んできたのは…金属製の机、棚、ベッド、古そうな暖房器具、そして何より部屋が狭いっ!「凄いな、ホンマに独房や」って気持ちになりました。(まぁ考察できる環境ではあるので競プロをしようと思えば出来るくらい)</p>
<p>風呂はよく覚えていないのですが、(確か)一般的な大浴場でした。冷蔵庫は共用、食べ物にマーカーで名前を書くシステム。(僕は名刺を挟んでいました。名刺の使い方の応用例(?)です。)ここでも参加者と交流を深められます。楽しい。</p>
<p>そしていろんな人と談笑しながら時間は過ぎていき、皆寝静まり始めました。僕はというと…寝られない!全然寝付けなかったのです。気分転換に部屋の外に出てみたのですが、隣にあるのは非常ドア。(ちなみに僕の部屋は廊下の端っこにあたる位置でした。)その非常ドアの文言がなかなかに怖くて、「このドアは外から開きません。門限は深夜0時です。」とのこと。その時0時を回っていたので、ドアの外に少し足を出すだけで臨死体験が出来ます。(しかもその時冬だったので寒い!)</p>
<p>そうして起きてる参加者とTwitterで交流したりどうぶつタワーバトルしながら時間を潰したりしていると、自然に(?)寝落ちに至りました。(この章宿泊施設かなり酷評してて怒られそう)</p>

<h3><a id="h9-2-6"></a>いざ本番へ!</h3>
<p>次の日の朝、無事に起床に成功した僕は宿で出される一般的な朝ご飯を食べ、バスで(昨日と同じ)本選の会場に向かうことになります。「いよいよなんだなぁ」って感じの気持ちになりながら、僕はバスに乗り込みました。</p>

<h3><a id="h9-2-7"></a>競技</h3>
<p>競技は4時間、静寂に包まれる中行われます。80台のPCと80人の競技者が並ぶのは壮観です。問題が入った茶封筒が配られ、「あぁ、いよいよなんだな」という気持ちにさせられます。</p>
<p>本選は、2完+部分点というのがセオリー、たいていの場合部分点勝負になります。</p>

<h4><a id="h9-2-7-1"></a>問1</h4>
<p>JOI君の部屋にはストーブがある．JOI君自身は寒さに強いのでひとりで部屋にいるときはストーブをつける必要はないが，来客があるときはストーブをつける必要がある．</p>
<p>この日，JOI君のもとには<span class="equation">N</span>人の来客がある．<span class="equation">i</span>番目 (<span class="equation">1 \leq i \leq N</span>) の来客は時刻<span class="equation">T_i</span>に到着し，時刻<span class="equation">T_i + 1</span>に退出する．同時に複数人の来客があることはない．</p>
<p>JOI君は任意の時刻にストーブをつけたり消したりできる．ただし，ストーブをつける度にマッチを1本消費する．JOI君はマッチを<span class="equation">K</span>本しか持っていないので，<span class="equation">K</span>回までしかストーブをつけることができない．一日のはじめにストーブは消えている．</p>
<p>ストーブをつけているとその分だけ燃料を消費するので，ストーブをつけたり消したりする時刻をうまく定めて，ストーブがついている時間の合計を最小化したい．</p>

<h4><a id="h9-2-7-2"></a>問1の考察</h4>
<p>まず、来客が来るごとにストーブをつけることを考え、そこからマッチを使うことを減らすために、つけっぱなしにする回数を増やしていきます。つけっぱなしにする位置は、時間が短いほうから貪欲法で選べます。これは割とすぐに解くことができました。</p>

<h4><a id="h9-2-7-3"></a>問2</h4>
<p>JOI国で美術展が行われることになった．美術展では，国中から集まった様々な美術品が展示される予定である．</p>
<p>展示される美術品の候補として，<span class="equation">N</span>点の美術品が集まった．これらの美術品には 1, 2, . . . , <span class="equation">N</span>の番号が付けられている．それぞれの美術品には大きさと価値と呼ばれる値が定まっている．美術品<span class="equation">i</span>(<span class="equation">1 \leq i \leq N</span>) の大きさは <span class="equation">A_i</span>，価値は<span class="equation">B_i</span>である．</p>
<p>美術展では，これらの美術品のうちから1点以上を選んで展示する．美術展の会場は十分に広く，<span class="equation">N</span>点の美術品すべてを展示することも可能である．しかし，JOI国の人々の美的感覚のため，美術品の間で大きさの差があまり大きくならないように展示する美術品を選びたい．一方，できるだけ価値の大きい美術品を多く展示したい．そのため，次の条件を満たすように展示する美術品を選ぶことにした:</p>
<ul>
<li>選んだ美術品の中で，大きさが最大のものの大きさを<span class="equation">A_{max}</span>，最小のものの大きさを<span class="equation">A_{min}</span>とする．また，選んだ美術品の価値の総和を<span class="equation">S</span>とする．</li>
<li>このとき，<span class="equation">S - (A_{max} - A_{min})</span>を最大化する．</li>
</ul>

<h4><a id="h9-2-7-4"></a>問2の考察</h4>
<p>まず、大きさ順に品物を並べ替えることを考えます。ここで、選んだ最大の品物と選んだ最小の品物の中間の品物は、すべて選んだほうが良いことがわかります。すると、価値の累積和をとることによって任意の区間を選んだ時の最大化するべき値が<span class="equation">O(1)</span>で求まります。それから、選ぶ最大を1~<span class="equation">N</span>個目まで回して、その後それより前の区間のうち、外すと価値が最大化されるものを順次計算で求めて最終的な最大を求めます。(自分がした解法をはっきり思い出せず、解説を読み直しました())ここまでは割と速くいって、意外と行けるのでは?とか思いながら残りの3問に向かいました。</p>

<h4><a id="h9-2-7-5"></a>残りの3問、苦戦</h4>
<p>しかし残りの3問になかなか悪戦苦闘してしまい、問3と問5で愚直なシミュレーションで25点を何とか稼いで、問4で小課題狙いを実装してバグらせていたところ、時間切れになってしまいました…</p>

<h3><a id="h9-2-8"></a>昼ごはん、お別れ</h3>
<p>昼ご飯はお弁当、まぁまぁ美味しかったです。その後、解説を聞きましたが解けなかった問題は難しすぎてあまり理解しきれませんでした。(いつか解きなおしたい)自分の暫定得点が225点、ボーダーは240前後だろうという話が出てバグらせたのを後悔し始めたのはこの時だったりします。</p>
<p>その後、参加者とお別れをして、大阪へ帰りました。</p>

<h3><a id="h9-2-9"></a>翌日、酸っぱい結果、反省、戒め、リベンジ</h3>
<p>大阪に帰ってきたその日に、結果は分かりました。結果は…8点足らずで春合宿落ちでした…(僕が225点で春合宿が233点)問4の小課題をバグらせていなかったらと今でも後悔しています。僕の運不足、練習不足、そして何より実力不足です。ただ強豪ひしめく中で思ったより戦えてたというのはありました。正直落ちた直後はメンタルやられていたのですが、今は過去問埋めをする、蟻本を読むなどして来年はもっと強くなって帰ってきてやる、絶対に春合宿に行ってやるという気持ちまで戻すことが出来たので、精進を重ねたいと思います。</p>
<p>今回の本選、少し悔しい思いもしましたが、めちゃくちゃ楽しかったしいい経験にもなったので、来年も本選、できれば来年はその先の春合宿に行けるよう頑張りたいです。</p>
      </div>
      <div class="navs">
        <nav class="book-navi book-prev">
                    <a href="niimi.html">
            <div class="book-cursor"><span class="cursor-prev">◀ 深層学習の基礎のキソ</span></div>
          </a>
                  </nav>
        <nav class="book-navi book-next">
                    <a href="postdef.html">
            <div class="book-cursor"><span class="cursor-next">▶ 編集後記</span></div>
          </a>
                  </nav>
      </div>
    </div>
  </div>
  <footer>
      </footer>
  <script>
    (function() {
      if (!window.katex) { return; }
      var equations = [].slice.call(document.querySelectorAll(".equation"));
      for (var i = 0; i < equations.length; i++) {
        katex.render(equations[i].textContent, equations[i]);
      }
    }) ();
  </script>
</body>
</html>
